<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flappy Bird Clone</title>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; background: #70c5ce; }
    canvas { display: block; }
    #passwordScreen {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      z-index: 9999;
    }
    #passwordInput {
      padding: 10px;
      font-size: 18px;
      border-radius: 6px;
      margin-bottom: 10px;
      border: none;
    }
    #submitPassword {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
<div id="passwordScreen">
  <input type="password" id="passwordInput" placeholder="Enter Password" />
  <button id="submitPassword">Submit</button>
</div>

<canvas id="gameCanvas"></canvas>
<div id="scoreDisplay">0</div>
<div id="leaderboardBtn" title="Leaderboard"></div>
<div id="startScreen"><button id="startButton">Start Game</button></div>
<div id="gameOverScreen">
  <img id="gameOverText" src="PngItem_2298909.png" alt="Game Over" />
  <div id="gameOverInfo"></div>
  <button id="restartButton">Restart</button>
</div>
<div id="fadeOverlay"></div>
<div id="tapText" style="display: none;">Tap to Flap</div>
<audio id="deathSound" src="traimory-hit-low-gun-shot-cinematic-trailer-sound-effects-161154.mp3"></audio>
<audio id="scoreSound1" src="coin-recieved-230517.mp3"></audio>
<audio id="scoreSound2" src="coin-257878.mp3"></audio>
<audio id="flapSound" src="flappy_whoosh-43099.mp3"></audio>

<script>
  // EmailJS Init
  emailjs.init("mp1Krfu8n84cHYidb");

  // Password check
  const passwordScreen = document.getElementById("passwordScreen");
  const submitBtn = document.getElementById("submitPassword");

  if (localStorage.getItem("passwordAccepted") === "true") {
    passwordScreen.style.display = "none";
  }

  submitBtn.addEventListener("click", () => {
    const input = document.getElementById("passwordInput").value.trim();
    if (input.toLowerCase() === "caprocz".toLowerCase()) {
      localStorage.setItem("passwordAccepted", "true");
      passwordScreen.style.display = "none";

      // Send email
      emailjs.send("service_79vdakn", "template_dlh7kgp", {
        message: "The password 'CapRocz' was entered."
      }).then(() => {
        console.log("Email sent.");
      }).catch(err => {
        console.error("Email failed:", err);
      });

    } else {
      alert("Incorrect password.");
    }
  });

  // --- Game code goes here (unchanged parts skipped for brevity)
</script>

<!-- Keep your existing game loop, Firebase config, update/draw/game logic below -->
<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  let width = window.innerWidth;
  let height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT.firebaseio.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Keep all your game code here (like before)...
</script>
</body>
</html>
